---
title: 9.25-学习计算机网络MAC层、操作系统X86架构
tags:
   - Diary
categories:
   - Diary
keywords: "Diary"
cover: https://cdn.jsdelivr.net/gh/lovevivi121/PicGo/img/111945697_p0.jpg
toc: True
abbrlink: 3
---

1. x86架构
   1. 需求
      1. 做生意要开放的营商环境，所以操作系统也需要一个统一的开放的架构
   2. 计算机的工作模式是什么样的？
   3. cpu和内存是如何配合工作的？
      1. cpu包裹三个部分，运算、数据、控制单元
      2. 从之后面就讲到了内存的数据和总线的位数有无统一标准？没有标准操作系统很难办，因为操作系统作为软件层没办法实现通用的运算逻辑
   4. 由此出现了X86架构
      1. 基本概念
         1. 英特尔的技术是行业的开放事实标准。由于这个系列开端于 8086，因此称为 x86 架构。
      2. 8086处理器
         1. 数据单元
            1. 内部有8个16位的通用寄存器，分别是AX BX CX DX SP BP SI DI 用于暂存数据
            2. AX BX CX DX 可以分成两个8位的寄存器使用，分别是AH AL BH BL etc，这样长短数据都可以暂存了
         2. 控制单元
            1. IP寄存器就是指令指针寄存器，指向代码段中下一条指令的位置。cpu会根据它来不断地将指令从内存的代码段中加载到cpu的指令队列中，然后交给运算单元执行。
2. 计算机网络
   1. MAC层
      1. 基本概念
         1. MAC层即媒体访问控制，数据链路层。
      2. 解决的主要问题
         1. 这个包是发给谁的？谁该接收？
         2. 如果大家都在发，谁先发，谁后发？会不会混乱？
         3. 如果发送的时候出现错误怎么办？
         4. 一个广播的网络里面接入了N台机器，怎么直到每个MAC地址是谁？
         5. 能否直到目标MAC地址就将数据包转到对应口的机器，从而不广播呢？
      3. 解决方案
         1. 针对问题一，通过MAC地址来确定发给谁，谁接收。有了目标MAC地址和源MAC地址，数据包在链路上广播，MAC的网卡才能发现这个包是给他的。MAC的网卡把包收进来，然后打开IP包交给网络层。
         2. 针对第二个问题，学名叫多路访问，有很多算法可以解决多路访问问题
            1. 信道划分，即分多个车道，每个车道中的车你走你的，我走我的
            2. 轮流协议，就像车今天单号出行，明天双号出行，轮着来
            3. 随机接入协议，有事儿先出门，发现特堵，就回去，错峰再出行（以太网）
         3. 针对问题三，对于以太网，MAC网络包中的最后4Byte是CRC循环冗余检测，通过XOR异或算法来计算整个包是否在发送过程中出现错误。
         4. 针对第四个问题，MAC层使用了ARP协议，也就是已知IP地址，求MAC地址的协议。具体机制是发送方“吼”一声，发送一个广播包，谁是这个IP谁来回答，为了避免每次都用ARP请求，机器会进行ARP缓存，并且过一段时间过期更新。
            1. ARP报文
         5. 针对第五个问题，有一个MAC层设备称为交换机，交换机会记住第一次广播吼的MAC地址，形成一个转发表，这样以后的目的地址是该MAC地址的就直接发送到这个口即可，不必广播了。
      4. MAC网络包格式
         1. 前6byte是目标MAC地址，再是6byte的源MAC地址，然后是2byte的类型（0800表示IP数据报，0806表示ARP请求和应答），然后是46－1500byte的数据，最后是4byteCRC循环冗余校验码

