---
title: 计网-传输层八股（一）
tags:
  - 计算机网络
  - blog
categories:
  - 计算机网络
#keywords: "hello 1"
cover: https://pic.imgdb.cn/item/65e21e529f345e8d0387b178.webp
toc: True
abbrlink: 11
---

# 3.10 简述 TCP 和 UDP 的区别，它们的头部结构是什么样的
- 1、有连接，无连接
- 2、按序到达，提供超时重传；U不保证按序到达，甚至不保证到达
- 3、T首部20B以上，U只需8B
- 4、TCP有流量控制和拥塞控制；U无，网络堵塞不影响发送的速率
- 5、T是一对一的；U反过来
- 6、T面向字节流，数据没有边界，会出现粘包拆包问题；U面向报文段，有消息边界
- 7、可靠，不可靠
- 8、速度快慢
- 9、应用场景，t适合对连接可靠性要求比较高，传输量大的场景，比如；u适合实时性高的场景，比如视频通话，游戏等
### 头部结构
- 源目序确首保标窗校紧
- udp：源目长校

# 3.8 简述 TCP 三次握手和四次挥手的过程
- sasa
- fafa

# 3.9 说说 TCP 2次握手行不行？为什么要3次
- tcp连接双方都维护了一个序列号，标识哪些是已经接收的包，三次握手是告知并确认序列起始值的毕竟步骤
- 若两次，最多只有c的序列号能被s确认，s不能确认c的

# 3.12 简述 TCP 连接 和 关闭的状态转移
- closed-listen（s端监听端口）-syn_sent（第一次）-syn_rcvd（第二次）-established

# 3.20 说说如果三次握手时候每次握手信息对方没收到会怎么样，分情况介绍
- 第一二次握手消息丢失，收不到ack，会进行重传；
- 第三次握手消息丢失，server端会重新发syn+ack包，
- 而Server重发SYN+ACK包的次数，可以设置/proc/sys/net/ipv4/tcp_synack_retries修改，默认值为5.
- RTO超时重传时间是成倍增长的

# 3.21 简述 TCP 的 TIME_WAIT，为什么需要有这个状态，说说MSL
- time_wait也成为2MSL等待状态，MSL是报文段最大生存时间；
- 主动关闭时，连接必须在time_wait状态停留2MSL时间，有两个原因，一个是保证最后的ACK到达S端，如果该ack丢失，则S端会重发FIN包，无法正常进入关闭连接状态；另一方面是防止新的相同IP和端口的连接出现旧连接的报文段，2MSL可以保证旧连接的报文段都被消失

# 3.23 说说什么是 SYN flood，如何防止这类攻击？
- 发大量伪造TCP请求，使得被攻击方资源耗尽
### 防止：
- CDN


# 3.24 说说什么是 TCP 粘包和拆包？
- tcp是面向数据流的，数据没有分界线，tcp会根据缓冲区的实际情况进行划分，可能把数据分成多个小包，也可能将两个数据包封装成一个大的数据包发送，有四种情形；
### 解决措施：
- 约定好分隔符
- 预定好包长度
- 消息头+消息体

# 3.14 说说 TCP 如何保证有序
- 发送方角度，每发送一个包就对应一个序列号，并在特定时间等待接收方确认，若没收到应答则重传
- 接收方角度，会将数据按正确顺序重组成数据流交给上层，然后发送应答包。

# 3.16 简述 TCP 超时重传
- 是保证可靠传输最重要的机制；每发送一个报文段，就会启动一个计数器并等待确认；接收方接收后发送确认报文；若未在规定时间被确认，则重传











